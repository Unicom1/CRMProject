<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>客户关系管理系统</title>
    <link rel="stylesheet" href="../../css/bootstrap/css/bootstrap.min.css" >
    <!--<link href="../js/AdminLTE/css/AdminLTE.min.css" rel="stylesheet">-->
    <!--<link href="../js/AdminLTE/css/skins/_all-skins.min.css" rel="stylesheet">-->
    <link rel="stylesheet" href="../../css/index.css">
    <link rel="stylesheet" href="../../css/left_menu.css">
    <link href="../../css/jquery.city.css" rel="stylesheet" />
    <link href="../../js/address/css/animate.min.css" rel="stylesheet" />
    <script src="../../js/jquery-3.2.1.js"></script>
    <!--<script src="../js/AdminLTE/js/app.min.js"></script>-->
    <script src="../../js/bootstrap.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/layer/layer.js"></script>
    <script src="../../js/address/js/jquery.city.js"></script>
    <style>
        #userMenu{
            margin-left:10px;
        }
        #userMenu li{
            float:left;
            list-style:none;
            height:60px;
            width:150px;
            padding-top:10px;
            text-align:center;
            font-size:22px;
            border-bottom:2px solid #ffb173;
        }
        a:hover{
            text-decoration:none;
        }

        table thead tr th{
            text-align:center;
        }
        .control-label{
            font-weight:400;
            font-size:16px;
        }
        .city-content{
            width:350px;
        }
    </style>
</head>
<body>
<div class="wrapper">
    <div class="wmenu">
        <dl ><dt class="user"><a href="#" style="margin-left:15px;">首页</a></dt></dl>
        <dl ><dt class="edit"><a href="#">用户管理</a></dt></dl>
        <dl style="background-color:#bdd7ee"><dt class="edit"><a href="#">客户管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">商机管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">产品管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">合同管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">财务管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">数据分析管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">办公管理</a></dt></dl>
    </div>
    <div style="float:right;margin-right:50px;margin-top:20px;font-size:15px;"><a href="">退出系统</a></div>
    <div class="content" style="margin-left:170px;">
        <div>
            <ul id="userMenu">
                <li><a href="javascript:void(0)" onclick="">客户列表</a></li>
                <li style="border:none;"><a href="javascript:void(0)" onclick="" style="color:grey;">客户联系人</a></li>
            </ul>
        </div>
        <div style="height:70px;"></div>
        <div  class="row" style="background-color:#ffffff;width:95%;height:500px;margin-left:2.5%;">
                <div class="form-group" style="height:500px;width:70%;overflow-y:auto;">
                    <div class="header" style="font-weight:500;font-size:19px;padding:5px 0 10px 15px;" >
                        <span class="glyphicon glyphicon-user"></span><span>基本信息</span>
                    </div>
                    <form role="form" id="addCustomerForm">
                    <div class="col-sm-offset-1">
                    <div class="form-group col-sm-12">
                        <label class="col-sm-3 control-label" >客户名</label>
                        <div class="col-sm-7">
                            <input type="text"  class="form-control" id="c_name"
                                   placeholder="请输入客户名" value="" required>
                        </div>
                        <div class="col-sm-2">
                            <span class="glyphicon glyphicon-asterisk" style="color: orangered;position:relative;top:20px;right:25px;"></span>
                        </div>
                    </div>
                    <div class="form-group col-sm-12">
                        <label class="col-sm-3 control-label" >客户状态</label>
                        <div class="col-sm-7">
                           <select class="form-control" id="c_state">
                               <option value="0">为意向客户</option>
                               <option value="1">为已成交客户</option>
                               <option value="2">失败客户</option>
                           </select>
                        </div>
                        <div class="col-sm-2">
                            <span class="glyphicon glyphicon-asterisk" style="color: orangered;position:relative;top:20px;right:25px;"></span>
                        </div>
                    </div>
                    <div class="form-group col-sm-12">
                        <label class="col-sm-3 control-label">客户行业</label>
                        <div class="col-sm-7">
                            <select class="form-control" id="c_work">
                                <option>IT</option>
                                <option>电子商务</option>
                                <option>教育</option>
                                <option>贸易</option>
                                <option>金融</option>
                                <option>医疗</option>
                                <option>房地产</option>
                                <option>政府</option>
                                <option>其他</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group col-sm-12">
                        <label class="col-sm-3 control-label">客户信息来源</label>
                        <div class="col-sm-7">
                            <select class="form-control" id="c_source">
                                <!--<option>请选择</option>-->
                                <option>电话</option>
                                <option>网络</option>
                                <option>上门</option>
                            </select>
                        </div>
                    </div>
                    <!--<div class="form-group col-sm-12">-->
                        <!--<label class="col-sm-3 control-label" for="userName">客户负责人</label>-->
                        <!--<div class="col-sm-7">-->
                            <!--<input type="text"  class="form-control" id="userName"-->
                                   <!--placeholder="请输入用户名" value="" required>-->
                        <!--</div>-->
                    <!--</div>-->
                    <div class="form-group col-sm-12">
                        <label class="col-sm-3 control-label">客户等级</label>
                        <div class="col-sm-7">
                            <select class="form-control" id="c_level">
                                <!--<option>请选择</option>-->
                                <option value="1">一星</option>
                                <option value="2">两星</option>
                                <option value="3">三星</option>
                                <option value="4">四星</option>
                                <option value="5">五星</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group col-sm-12">
                        <label class="col-sm-3 control-label">客户地址</label>
                        <div class="col-sm-9">
                            <div  >
                                <input type="text" id="txt_city" />
                            </div>
                        </div>
                        <div class="col-sm-7 col-sm-offset-3">
                            <input type="text"  class="form-control" id="c_street"
                                   placeholder="请输入街道信息"  >
                        </div>
                    </div>
                    <div class="form-group col-sm-12">
                        <label class="col-sm-3 control-label">备注信息</label>
                        <div class="col-sm-7">
                            <textarea id="c_remark"  class="form-control" style="height:100px;" ></textarea>
                        </div>
                    </div>
                    </div>
                        </form>
                </div>
                <!--<div class="form-group" style="float:right;width:49.9%;height:500px;overflow-y:auto;">-->
                    <!--<div class="header" style="font-weight:500;font-size:19px;padding:5px 0 10px 15px;" >-->
                        <!--<span class="glyphicon glyphicon-user"></span><span>首要联系人</span>-->
                    <!--</div>-->
                    <!--<div class="form-group col-sm-12">-->
                        <!--<label class="col-sm-3 control-label" >联系人姓名</label>-->
                        <!--<div class="col-sm-7">-->
                            <!--<input type="text"  class="form-control" id=""-->
                                   <!--placeholder="请输入联系人姓名" value="" required>-->
                        <!--</div>-->
                        <!--<div class="col-sm-offset-3 col-sm-7" style="color:lightgray">如有联系人信息，则联系人姓名不能为空</div>-->
                    <!--</div>-->
                    <!--<div class="form-group col-sm-12">-->
                        <!--<label class="col-sm-3 control-label" >角色</label>-->
                        <!--<div class="col-sm-7">-->
                            <!--<select class="form-control">-->
                                <!--<option>请选择</option>-->
                                <!--<option>普通人</option>-->
                                <!--<option>决策人</option>-->
                                <!--<option>分项决策人</option>-->
                                <!--<option>商务决策</option>-->
                                <!--<option>技术决策</option>-->
                                <!--<option>财务决策</option>-->
                                <!--<option>使用人</option>-->
                                <!--<option>意见影响人</option>-->
                            <!--</select>-->
                        <!--</div>-->
                        <!--&lt;!&ndash;<div class="col-sm-2">&ndash;&gt;-->
                            <!--&lt;!&ndash;<span class="glyphicon glyphicon-asterisk" style="color: orangered;position:relative;top:20px;right:25px;"></span>&ndash;&gt;-->
                        <!--&lt;!&ndash;</div>&ndash;&gt;-->
                    <!--</div>-->
                    <!--<div class="form-group col-sm-12">-->
                        <!--<label class="col-sm-3 control-label" >用户权限</label>-->
                        <!--<div class="col-sm-7" style="padding-top:5px;">-->
                            <!--<label><input type="radio" name="contact_sex"   value="0" checked="checked"/>先生</label>-->
                            <!--<label><input type="radio" name="contact_sex"   style="margin-left:30px;" value="1"/>女士</label>-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="form-group col-sm-12">-->
                        <!--<label class="col-sm-3 control-label" >职位</label>-->
                        <!--<div class="col-sm-7">-->
                            <!--<input type="text"  class="form-control" id=""-->
                                   <!--placeholder="请输入职位" value="" required>-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="form-group col-sm-12">-->
                        <!--<label class="col-sm-3 control-label" >手机</label>-->
                        <!--<div class="col-sm-7">-->
                            <!--<input type="text"  class="form-control" id=""-->
                                   <!--placeholder="请输入手机号码" value="" required>-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="form-group col-sm-12">-->
                        <!--<label class="col-sm-3 control-label" >邮箱地址</label>-->
                        <!--<div class="col-sm-7">-->
                            <!--<input type="email"  class="form-control" id=""-->
                                   <!--placeholder="请输入邮箱" value="" required>-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="form-group col-sm-12">-->
                        <!--<label class="col-sm-3 control-label">地址</label>-->
                        <!--<div class="col-sm-9">-->
                            <!--<div  >-->
                                <!--<input type="text" id="txt_city2" />-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="col-sm-7 col-sm-offset-3">-->
                            <!--<input type="text"  class="form-control" id=""-->
                                   <!--placeholder="请输入街道信息" value="" >-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="form-group col-sm-12">-->
                        <!--<label class="col-sm-3 control-label">备注信息</label>-->
                        <!--<div class="col-sm-7">-->
                            <!--<textarea type=""  class="form-control" style="height:100px;" ></textarea>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
                <!--</form>-->
        <!--</div>-->
            <div class="col-md-offset-4" style="">
                <button type="button" id="addCustomerBtn" class="btn btn-primary" onclick="addCustomer()">创建客户</button>
            </div>
        </div>
</div>
</div>
<script type="text/javascript">
    $('.wmenu dl dt').click(function(){
        $(this).toggleClass('icotop');
        $(this).siblings('dd').toggleClass('hidden');
    });

    /*地址*/
        $(function () {
                $('#txt_city').jcity({
                    urlOrData: '../../js/address/js/citydata.json',
                            animate: { showClass: 'animated flipInX', hideClass: 'animated flipOutX' },  // 需要第一步引用的animate.min.css文件，也可以自己定义动画
                    onChoice: function (data) {
                            console.log(data);
                        }
                });

//            $('#txt_city2').jcity({
//                urlOrData: '../../js/address/js/citydata.json',
//                animate: { showClass: 'animated flipInX', hideClass: 'animated flipOutX' },  // 需要第一步引用的animate.min.css文件，也可以自己定义动画
//                onChoice: function (data) {
//                    console.log(data);
//                }
//            });
         });

        function addCustomer(){
            var c_name = $('#c_name').val();
            var c_state = $('#c_state option:selected') .val();
            var c_work = $('#c_work option:selected') .text();
            var c_source = $('#c_source option:selected') .text();
            var c_level = $('#c_level option:selected') .val();
            var c_address = $('#txt_city').val();
            var c_remark = $('#c_remark').val();
            /*拼接街道*/
            var c_street = $('#c_street').val();
            if(c_street!==''){
                c_address = c_address +"-"+c_street;
            }

          //  console.log(c_name+","+c_state+","+c_work+","+c_source+","+c_level+","+c_address+","+c_remark);

            if(c_name==''||c_name==null){
                layer.msg("客户名不能为空！");
            }else{
                $.ajax({
                    url: '/Customer/addCustomer',
                    data: {'c_name':c_name,'c_state':c_state,'c_work':c_work,'c_source':c_source,'c_level':c_level,
                        'c_address':c_address,'c_remark':c_remark},
                    dataType: 'json',
                    type: 'POST',
                    success: function (res) {
                        if (res.state == 0) {
                            layer.msg("客户已存在！");
                        } else if (res.state == 1){
                            layer.msg("新建客户失败！");
                        }else if (res.state == 2){
                            layer.msg(res.errMsg);

                        }
                    },
                    error: function () {
                        layer.msg("网络连接失败！");
                    }
                })
            }
        }
</script>
</body>
</html>