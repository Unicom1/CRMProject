<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>客户关系管理系统</title>
    <link rel="stylesheet" href="../../css/bootstrap/css/bootstrap.min.css" >
    <!--<link href="../js/AdminLTE/css/AdminLTE.min.css" rel="stylesheet">-->
    <!--<link href="../js/AdminLTE/css/skins/_all-skins.min.css" rel="stylesheet">-->
    <link rel="stylesheet" href="../../css/index.css">
    <link rel="stylesheet" href="../../css/left_menu.css">
    <script src="../../js/jquery-3.2.1.js"></script>
    <!--<script src="../js/AdminLTE/js/app.min.js"></script>-->
    <script src="../../js/bootstrap.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/layer/layer.js"></script>
    <style>
        #userMenu{
            margin-left:10px;
        }
        #userMenu li{
            float:left;
            list-style:none;
            height:60px;
            width:150px;
            padding-top:10px;
            text-align:center;
            font-size:22px;
            border-bottom:2px solid #ffb173;
        }
        a:hover{
            text-decoration:none;
        }

        table thead tr th{
            text-align:center;
        }
    </style>
</head>
<body>
<div class="wrapper">
    <div class="wmenu">
        <dl ><dt class="user"><a href="#" style="margin-left:15px;">首页</a></dt></dl>
        <dl style="background-color:#bdd7ee"><dt class="edit"><a href="#">用户管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">商机管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">产品管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">产品管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">编辑管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">编辑管理</a></dt></dl>
        <dl><dt class="edit"><a href="#">编辑管理</a></dt></dl>
    </div>
    <div style="float:right;margin-right:50px;margin-top:20px;font-size:15px;"><a href="">退出系统</a></div>
    <div class="content" style="margin-left:170px;">
        <div>
            <ul id="userMenu">
                <li><a href="javascript:void(0)" onclick="">用户列表</a></li>
                <!--<li style="border:none;"><a href="javascript:void(0)" onclick="" style="color:grey;">修改密码</a></li>-->
            </ul>
        </div>
        <div >
            <table class="table table-bordered table-condensed list_table" style="text-align:center;background-color:#ffffff;width:90%;position:relative;top:20px;left:20px;">
                <thead >
                <tr>
                <th width="8%">ID</th>
                <th width="10%">用户名</th>
                <th width="5%">性别</th>
                <th width="8%">权限</th>
                <th width="8%">部门</th>
                <th width="15%">手机号</th>
                <th width="15%">邮箱</th>
                <th width="15%">头像</th>
                <th>操作</th></tr>
                </thead>
                <tbody>
                <tr>
                    <td></td>
                    <td >123</td>
                    <td ></td>
                    <td></td>
                    <td></td>
                    <td ></td>
                    <td></td>
                    <td></td>
                    <td >
                        <a style="margin-right: 15px;"  href="">修改密码</a>
                        <a style="margin-right: 15px;"  href="">编辑</a>
                        <a style="color: #FF0000;" href="javascript: void(0)" onclick="deleteAction(this)">删除</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>
<script type="text/javascript">
    $('.wmenu dl dt').click(function(){
        $(this).toggleClass('icotop');
        $(this).siblings('dd').toggleClass('hidden');
    });

    function deleteAction(self) {
        //var userName = $(self).parentNode.parentNode.firstChild.nextSibling.innerHTML;
        console.log($(self).previousSibling);
        layer.confirm("确定删除该用户？", {
            title:false,
            btn: ['确定', '取消'] //可以无限个按钮
        }, function (index) {
            //按钮【按钮一】的回调
            $.ajax({
                url: "/User/deleteUser" ,
                data: {'userName':userName},
                dataType: "json",
                success: function (res) {
                    if (res.state == 0) {
                        layer.msg("删除成功！");
                        setTimeout(
                                "window.location.reload();",
                                800
                        )
                    } else {
                        layer.alert("删除失败!" );
                    }
                },
                error: function () {
                    layer.msg("网络出错！");
                }
            })
        });
    }
</script>
</body>
</html>